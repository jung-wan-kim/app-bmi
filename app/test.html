<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TikTok Clone Test</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background: #f0f0f0;
    }
    .status {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .success { color: green; }
    .error { color: red; }
    .warning { color: orange; }
  </style>
</head>
<body>
  <h1>TikTok Clone Component Test</h1>
  <div id="status" class="status">
    <h2>Loading Status</h2>
    <div id="checks"></div>
  </div>
  
  <div id="app" style="border: 2px solid #333; min-height: 200px; background: white; padding: 10px;">
    <p>App container - waiting for components...</p>
  </div>

  <!-- Load Lynx -->
  <script src="lib/lynx-core.js"></script>
  
  <!-- Load Components -->
  <script src="components/VideoPlayer.js"></script>
  <script src="components/VideoFeed.js"></script>
  <script src="components/InteractionBar.js"></script>
  <script src="components/NavigationBar.js"></script>
  <script src="components/CommentsPanel.js"></script>
  <script src="pages/HomePage.js"></script>
  <script src="pages/ProfilePage.js"></script>
  <script src="pages/UploadPage.js"></script>
  <script src="App.js"></script>

  <script>
    const checks = document.getElementById('checks');
    
    function addCheck(name, success, details = '') {
      const div = document.createElement('div');
      div.className = success ? 'success' : 'error';
      div.innerHTML = `${success ? '✅' : '❌'} ${name} ${details ? `- ${details}` : ''}`;
      checks.appendChild(div);
    }
    
    // Check Lynx
    addCheck('Lynx Framework', typeof lynx !== 'undefined');
    
    // Check LynxComponent
    addCheck('LynxComponent Base Class', typeof LynxComponent !== 'undefined');
    
    // Try to register components
    try {
      if (typeof VideoPlayer !== 'undefined') {
        lynx.registerComponent('video-player', VideoPlayer);
        addCheck('VideoPlayer', true);
      } else {
        addCheck('VideoPlayer', false, 'Not defined');
      }
      
      if (typeof HomePage !== 'undefined') {
        lynx.registerComponent('home-page', HomePage);
        addCheck('HomePage', true);
      } else {
        addCheck('HomePage', false, 'Not defined');
      }
      
      if (typeof App !== 'undefined') {
        lynx.registerComponent('app', App);
        addCheck('App', true);
      } else {
        addCheck('App', false, 'Not defined');
      }
      
      // Mount app
      const appContainer = document.getElementById('app');
      appContainer.innerHTML = '<p>Mounting app...</p>';
      
      setTimeout(() => {
        try {
          lynx.mount(appContainer, lynx.element('app'));
          addCheck('App Mounted', true);
          
          // Check if content is rendered
          setTimeout(() => {
            const hasContent = appContainer.children.length > 0;
            addCheck('Content Rendered', hasContent, 
              `${appContainer.children.length} child elements`);
          }, 1000);
          
        } catch (e) {
          addCheck('App Mount', false, e.message);
          console.error('Mount error:', e);
        }
      }, 100);
      
    } catch (e) {
      addCheck('Component Registration', false, e.message);
      console.error('Registration error:', e);
    }
    
    // Log all errors
    window.addEventListener('error', (e) => {
      addCheck('Runtime Error', false, e.message);
      console.error('Window error:', e);
    });
  </script>
</body>
</html>